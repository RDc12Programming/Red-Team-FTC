/*
Copyright 2019 FIRST Tech Challenge Team 4891 (PHS Team RED)
          __    ___    ________    ___________     _____
         / /   /   |  /        |  / _____     |  _/     | 
        / /   /   /  / _____  /  / /    /    /  /      / 
       / /   /   /  / /    / /  / /    /    /  /___   / 
      / /___/   /  / /    / /  / /____/    /      /  / Prosper High School
     |_____    /  | /____/ /  |______     /      /  /     4891 RED Team
          /   /  / _____  |         /    /      /  /     all three of us
         /   /  / /    / /         /    /      /  /
        /   /  / /    / /         /    /  ____/  /____
       /   /  / /____/ /         /    /  /            |
      |___/  |________/         |____/  |____________/
< ASCII 4891 and this program made by Rylan >
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
associated documentation files (the "Software"), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge, publish, distribute,
sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial
portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT
NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

/*
    Stage 0: Error
    Stage 1: Move Build Plate
        1.1: Go to plate
        1.2: Plates lowered
        1.3: Pull
        1.4: Exit to side
    Stage 6: Move to line under bridge
    
    Moves ~1 fps
    10888 Ticks per second
*/

package org.firstinspires.ftc.teamcode;

import com.qualcomm.robotcore.eventloop.opmode.LinearOpMode;
import com.qualcomm.robotcore.eventloop.opmode.OpMode;
import com.qualcomm.robotcore.eventloop.opmode.Autonomous;
import com.qualcomm.robotcore.util.ElapsedTime;
import com.qualcomm.robotcore.hardware.DcMotor;
import com.qualcomm.robotcore.hardware.Servo;
import com.qualcomm.robotcore.hardware.ColorSensor;
import com.qualcomm.robotcore.eventloop.opmode.Disabled;
import com.qualcomm.robotcore.hardware.DcMotorSimple;

@Autonomous(name="Temp", group="TEST")
public class Temp extends LinearOpMode {

        // Define Motors
    private ElapsedTime runtime     = new ElapsedTime();
    
    private DcMotor leftRearDrive   = null; // Back  Left  Wheel
    private DcMotor leftFrontDrive  = null; // Front Left  Wheel
    private DcMotor rightRearDrive  = null; // Back  Right Wheel
    private DcMotor rightFrontDrive = null; // Front Right Wheel
    //private DcMotor Lift            = null; // Lift  Height
    //private DcMotor Lift2           = null; // Lift Height #2
    //private Servo   LiftRotate      = null; // Lift  Rotation
    //private DcMotor intakeRight     = null; // Right Intake
    //private DcMotor intakeLeft      = null; // Left  Intake
    //private Servo   clamp           = null; // Clamp
    //private Servo   clampRotate     = null; // Clamp Rotation
    private Servo   leftGrab        = null; // Left  Plate Grabber
    private Servo   rightGrab       = null; // Right Plate Grabber
    
    //ColorSensor color_sensor;
    
        // Define Mecanum values
    double RF; double LF; double RR; double LR; // Drive Speeds
    double X1;            double X2; double Y2; // Joystick Values
    
        // Variables
    
    //int ;

   // double  tgtLiftPower       =     0;
    //double  tgtLiftRotate      =     0;
    //double  tgtIntakePower     =     0;
    //double  tgtClampRotation   =     0;

    //double colors = 0;
    //double red = 0;
    //double green = 0;
    //double blue = 0;
 
    //boolean clamped            = false;
    boolean plates             = false;

    int ss1 = 0;
    int ss2 = 0;

    int i = 0;
    int per = 10888;
    //int stage = 1;

    @Override
    public void runOpMode() {

            // Set Initialized status
        telemetry.addData("Status", "Initialized");
        telemetry.update();
        
            // Map DcMotors
        leftFrontDrive  = hardwareMap.dcMotor.get( "leftFrontDrive" );
        leftRearDrive   = hardwareMap.dcMotor.get( "leftRearDrive"  );
        rightFrontDrive = hardwareMap.dcMotor.get( "rightFrontDrive");
        rightRearDrive  = hardwareMap.dcMotor.get( "rightRearDrive" );
        //Lift            = hardwareMap.dcMotor.get( "Lift"           );
        //Lift2           = hardwareMap.dcMotor.get( "Lift2"          );
        //LiftRotate      = hardwareMap.servo.get(   "LiftRotate"     ); 
        //intakeRight     = hardwareMap.dcMotor.get( "intakeRight"    );
        //intakeLeft      = hardwareMap.dcMotor.get( "intakeLeft"     );
        //clamp           = hardwareMap.servo.get(   "clamp"          );
        //clampRotate     = hardwareMap.servo.get(   "clampRotate"    );
        leftGrab        = hardwareMap.servo.get(   "leftGrab"       );
        rightGrab       = hardwareMap.servo.get(   "rightGrab"      );
        //color_sensor = hardwareMap.colorSensor.get("color"          );
        
            // Setup Mecanum Directions
        leftFrontDrive.setDirection(DcMotor.Direction.FORWARD );
        leftRearDrive.setDirection( DcMotor.Direction.FORWARD );
        rightFrontDrive.setDirection(DcMotor.Direction.FORWARD);
        rightRearDrive.setDirection( DcMotor.Direction.FORWARD);
       
            // Set Encoders
        leftFrontDrive.setMode( DcMotor.RunMode.RUN_USING_ENCODER);
        leftRearDrive.setMode(  DcMotor.RunMode.RUN_USING_ENCODER);
        rightFrontDrive.setMode(DcMotor.RunMode.RUN_USING_ENCODER);
        rightFrontDrive.setMode(DcMotor.RunMode.RUN_USING_ENCODER);
        //LiftRotate.setMode(     DcMotor.RunMode.RUN_USING_ENCODER);
        
        //clampRotate.setPosition(1);

        // Wait for the game to start (driver presses PLAY)
        waitForStart();

        // run until the end of the match (driver presses STOP)
    while (opModeIsActive()) {
        //colors = color_sensor.argb();
        //red    = color_sensor.red();
        //green  = color_sensor.green();
        //blue   = color_sensor.blue();

        //tgtIntakePower = 0;
        
        telemetry.addData("Status", "Running"); // Set Status Running
        telemetry.update();                     // Update Telemetry
            
        LF = 0; RF = 0; LR = 0; RR = 0; // Mecanum Reset
        if(plates){
             leftGrab.setPosition(1);
            rightGrab.setPosition(0);
        } else {
             leftGrab.setPosition(0);
            rightGrab.setPosition(1);
        }
         
        LF += X2; RF += X2; LR += X2; RR += X2; // Strafe Movement
        LF -= Y2; RF += Y2; LR += Y2; RR -= Y2; // Forward / Backward Movement
        LF += X1; RF += X1; LR -= X1; RR -= X1; // Rotate Left / Right
        
        LF = Math.max(-1.0, Math.min(LF, 1.0));
        RF = Math.max(-1.0, Math.min(RF, 1.0));
        LR = Math.max(-1.0, Math.min(LR, 1.0));
        RR = Math.max(-1.0, Math.min(RR, 1.0));
        
        leftFrontDrive.setPower( LF);
        leftRearDrive.setPower(  LR);
        rightFrontDrive.setPower(RF);
        rightRearDrive.setPower( RR);
        
        telemetry.addData("Tick Num ",            i                );
        telemetry.addData("Plates", plates);
        telemetry.addData("LF", "%.3f", RR);
        telemetry.addData("RF", "%.3f", RF);
        telemetry.addData("LR", "%.3f", LR);
        telemetry.addData("RR", "%.3f", RR);
        telemetry.addData("Y2", Y2);
        telemetry.addData("X2", X2);
        if (getRuntime() < 0.1){
            Y2 = -1;
        } else {
            Y2 = 0;
        }
             if(getRuntime() < 2){
                X2 = -1;
            } else if(getRuntime() < 2.9){
                X1 = 0.1;
                Y2 = -1;
            } else {
                Y2 = X2 = X1 = 0;
            }

      i++;
        
    }
    }
}
